# Описание архитектуры
## Декомпозиция задачи на подсистемы, классы и методы:
* Подсистемы:
  - Драйвер всех программ
  - Менеджер пайпов
  - Обработчик команд
  - Парсер команд
  - Управление окружением
  - Вызов внешних программ
* Классы:
  - `Interpreter`: Основной поток, связывает приложение воедино.
  - `PipeManager`: Отвечает за создание, запуск, завершение пайпов.
  - `CommandHandler`: Реализует логику выполнения различных команд (`cat`, `echo`, `wc`, `pwd`, `exit`).
  - `CommandParser`: Отвечает за разбор и анализ введенных команд.
  - `EnvironmentManager`: Отвечает за управление окружением (переменные, подстановка).
  - `ExternalProcessManager`: Отвечает за вызов внешних программ.
* Основные методы:
  - `Interpreter.run()`: Запускает интерпретатор.
  - `PipeManager.execute(parts : [str])`: Выполняет пайплайн.
  - `CommandParser.parse(input : str)`: Разбирает введенную команду и возвращает ее компоненты.
  - `CommandHandler.execute(command : str, args : [str])`: Выполняет указанную команду с аргументами.
  - `EnvironmentManager.set_variable(name : str, value : str)`: Устанавливает значение переменной окружения.
  - `EnvironmentManager.get_variable(name : str)`: Получает значение переменной окружения.
  - `ExternalProcessManager.run_process(command : str, args : [str])`: Запускает внешнюю программу с указанными аргументами.

## Диаграмма компонент:
```
   +--------------------+     +--------------------+
   |   Interpreter      |     |  EnvironmentManager|
   |--------------------|     |--------------------|
   | - run()            |<----| - get_env_var()    |
   | - execute_command()|---->| - set_env_var()    |
   +--------------------+     | - expand_vars()    |
         |                    +--------------------+
         | 1. Получает команду         ^
         v                             |
+-------------------+    3. Запрашивает подстановку переменных
|  CommandParser    |<------------------
|-------------------|
| - parse_command() |
| - tokenize()      |
+-------------------+
         |
         | 2. Возвращает структурированную команду
         v
+-------------------+          +-------------------+
|  CommandHandler   |--------->| ExternalProcess   |
|-------------------|          | Manager           |
| - execute_*()     |<---------|-------------------|
+-------------------+          | - run_process()   |
         |                     | - wait_process()  |
         | 4. Программа без    +-------------------+
         |   пайпов -- это пайп       ^
         |   размера один.            |
         v                            |
+-------------------+                 |
|  PipeManager      |                 |                 
|-------------------|                 |
| - create_pipe()   |        5. Использует ExternalProcessManager
| - execute()       |-----------------
| - close_pipes()   |
+-------------------+
```
